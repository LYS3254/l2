<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ç»¸ä¹‹è·¯å†å²æ—¶é—´å¤§é—¯å…³</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f4e8; /* æ²™è‰²èƒŒæ™¯ */
            color: #333;
        }
        h1 {
            color: #8B4513;
            text-align: center;
            margin-bottom: 30px;
            padding: 10px;
            border-radius: 10px;
            background-color: rgba(255,255,255,0.7);
        }
        .quiz-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid #d4b483; /* æ²™æ¼ è‰²è¾¹æ¡† */
        }
        .question {
            margin-bottom: 15px;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        input[type="text"] {
            padding: 5px;
            margin: 0 5px;
            width: 80px;
            text-align: center;
            border: 1px solid #8B4513;
            border-radius: 4px;
        }
        button {
            background-color: #8B4513;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: block;
            font-size: 16px;
            margin: 20px auto;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #A0522D;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        .correct {
            background-color: #dff0d8;
            color: #3c763d;
        }
        .incorrect {
            background-color: #f2dede;
            color: #a94442;
        }
        .stats {
            margin-top: 30px;
            padding: 15px;
            background-color: #e7f3fe;
            border-radius: 5px;
        }
        .wrong-answers {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff3cd;
            border-radius: 5px;
            display: none;
        }
        .feedback {
            font-size: 14px;
            margin-top: 5px;
        }
        .info-box {
            background-color: #f0e6cc; /* æµ…æ²™è‰² */
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #8B4513;
        }
    </style>
</head>
<body>
    <h1>ä¸ç»¸ä¹‹è·¯å†å²æ—¶é—´å¤§é—¯å…³</h1>
    
    <div class="quiz-container">
        <div class="info-box">
            <p>ä¸ç»¸ä¹‹è·¯æ˜¯å¤ä»£è¿æ¥ä¸œè¥¿æ–¹çš„é‡è¦è´¸æ˜“é€šé“ï¼Œå¯¹ä¸­å¤–æ–‡åŒ–äº¤æµäº§ç”Ÿäº†æ·±è¿œå½±å“ã€‚æœ¬æµ‹è¯•å°†è€ƒå¯Ÿä½ å¯¹ä¸ç»¸ä¹‹è·¯ç›¸å…³å†å²äº‹ä»¶æ—¶é—´çš„æŒæ¡æƒ…å†µã€‚</p>
        </div>
        
        <div id="questions"></div>
        <button id="submit-btn">æäº¤ç­”æ¡ˆ</button>
        <button id="new-quiz-btn" style="display: none;">å¼€å§‹æ–°æµ‹è¯•</button>
        
        <div id="result" class="result"></div>
        
        <div class="stats">
            <h3>å­¦ä¹ ç»Ÿè®¡</h3>
            <p>æ€»ç­”é¢˜æ•°: <span id="total-answered">0</span></p>
            <p>æ­£ç¡®æ•°: <span id="correct-count">0</span></p>
            <p>é”™è¯¯æ•°: <span id="wrong-count">0</span></p>
            <p>æ­£ç¡®ç‡: <span id="accuracy-rate">0</span>%</p>
        </div>
        
        <div id="wrong-answers" class="wrong-answers">
            <h3>é”™é¢˜é›†</h3>
            <div id="wrong-answers-list"></div>
        </div>
    </div>

    <script>
        // ä¸ç»¸ä¹‹è·¯å†å²äº‹ä»¶æ•°æ®åº“
        const silkRoadEvents = [
            { event: "å¼ éªç¬¬ä¸€æ¬¡å‡ºä½¿è¥¿åŸŸ", year: "å‰138å¹´" },
            { event: "å¼ éªç¬¬äºŒæ¬¡å‡ºä½¿è¥¿åŸŸ", year: "å‰119å¹´" },
            { event: "è¥¿æ±‰è®¾ç«‹è¥¿åŸŸéƒ½æŠ¤åºœ", year: "å‰60å¹´" },
            { event: "ç­è¶…å‡ºä½¿è¥¿åŸŸ", year: "73å¹´" },
            { event: "ç”˜è‹±å‡ºä½¿å¤§ç§¦ï¼ˆç½—é©¬å¸å›½ï¼‰", year: "97å¹´" },
            { event: "ä¸œæ±‰æ¢å¤è¥¿åŸŸéƒ½æŠ¤åºœ", year: "123å¹´" },
            { event: "æ³•æ˜¾è¥¿è¡Œæ±‚æ³•", year: "399å¹´" },
            { event: "åŒ—é­ç»Ÿä¸€åŒ—æ–¹ï¼Œä¸ç»¸ä¹‹è·¯åŒ—é“å¼€é€š", year: "439å¹´" },
            { event: "ç„å¥˜è¥¿è¡Œå–ç»", year: "629å¹´" },
            { event: "å”æœè®¾ç«‹å®‰è¥¿éƒ½æŠ¤åºœ", year: "640å¹´" },
            { event: "å”æœè®¾ç«‹åŒ—åº­éƒ½æŠ¤åºœ", year: "702å¹´" },
            { event: "é‰´çœŸä¸œæ¸¡æ—¥æœ¬ä¼ æ’­ä½›æ•™", year: "753å¹´" },
            { event: "æ€›ç½—æ–¯ä¹‹æˆ˜ï¼ˆå”å†›ä¸é˜¿æ‹‰ä¼¯å¸å›½ï¼‰", year: "751å¹´" },
            { event: "é©¬å¯Â·æ³¢ç½—åˆ°è¾¾å…ƒæœ", year: "1275å¹´" },
            { event: "éƒ‘å’Œä¸‹è¥¿æ´‹ï¼ˆæµ·ä¸Šä¸ç»¸ä¹‹è·¯ï¼‰", year: "1405å¹´" },
            { event: "æ˜æœå…³é—­å˜‰å³ªå…³ï¼Œé™†ä¸Šä¸ç»¸ä¹‹è·¯è¡°è½", year: "1524å¹´" },
            { event: "å¤§èˆªæµ·æ—¶ä»£å¼€å§‹ï¼Œä¸ç»¸ä¹‹è·¯é‡è¦æ€§ä¸‹é™", year: "1492å¹´" },
            { event: "ç‘å…¸æ¢é™©å®¶æ–¯æ–‡Â·èµ«å®šå‘ç°æ¥¼å…°å¤åŸ", year: "1900å¹´" },
            { event: "è”åˆå›½æ•™ç§‘æ–‡ç»„ç»‡å°†ä¸ç»¸ä¹‹è·¯åˆ—å…¥ä¸–ç•Œé—äº§", year: "2014å¹´" },
            { event: "ä¸­å›½æå‡º'ä¸€å¸¦ä¸€è·¯'å€¡è®®", year: "2013å¹´" },
            { event: "ç²Ÿç‰¹äººåœ¨æ’’é©¬å°”ç½•å»ºç«‹å•†ä¸šç½‘ç»œ", year: "5ä¸–çºª" },
            { event: "æ‹œå åº­å¸å›½è·å¾—å…»èš•æŠ€æœ¯", year: "552å¹´" },
            { event: "é€ çº¸æœ¯ç»é˜¿æ‹‰ä¼¯ä¼ å…¥æ¬§æ´²", year: "751å¹´" },
            { event: "ä½›æ•™ç»ä¸ç»¸ä¹‹è·¯ä¼ å…¥ä¸­å›½", year: "1ä¸–çºª" },
            { event: "æ™¯æ•™ï¼ˆåŸºç£æ•™è‚æ–¯è„±åˆ©æ´¾ï¼‰ä¼ å…¥ä¸­å›½", year: "635å¹´" },
            { event: "ä¼Šæ–¯å…°æ•™ç»ä¸ç»¸ä¹‹è·¯ä¼ å…¥ä¸­å›½", year: "651å¹´" },
            { event: "è’™å¤å¸å›½å»ºç«‹ï¼Œä¸ç»¸ä¹‹è·¯ç©ºå‰ç¹è£", year: "1206å¹´" },
            { event: "é»‘æ­»ç—…ç»ä¸ç»¸ä¹‹è·¯ä¼ æ’­åˆ°æ¬§æ´²", year: "1347å¹´" }
        ];

        // å­¦ä¹ ç»Ÿè®¡
        let stats = {
            totalAnswered: 0,
            correctCount: 0,
            wrongCount: 0,
            wrongAnswers: []
        };

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ç»Ÿè®¡ä¿¡æ¯
        function loadStats() {
            const savedStats = localStorage.getItem('silkRoadQuizStats');
            if (savedStats) {
                stats = JSON.parse(savedStats);
                updateStatsDisplay();
            }
        }

        // ä¿å­˜ç»Ÿè®¡ä¿¡æ¯åˆ°æœ¬åœ°å­˜å‚¨
        function saveStats() {
            localStorage.setItem('silkRoadQuizStats', JSON.stringify(stats));
        }

        // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
        function updateStatsDisplay() {
            document.getElementById('total-answered').textContent = stats.totalAnswered;
            document.getElementById('correct-count').textContent = stats.correctCount;
            document.getElementById('wrong-count').textContent = stats.wrongCount;
            
            const accuracy = stats.totalAnswered > 0 ? 
                Math.round((stats.correctCount / stats.totalAnswered) * 100) : 0;
            document.getElementById('accuracy-rate').textContent = accuracy;
            
            // æ˜¾ç¤ºé”™é¢˜é›†
            if (stats.wrongAnswers.length > 0) {
                const wrongAnswersList = document.getElementById('wrong-answers-list');
                wrongAnswersList.innerHTML = '';
                
                stats.wrongAnswers.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'question';
                    div.innerHTML = `
                        <p><strong>${item.event}</strong></p>
                        <p>ä½ çš„ç­”æ¡ˆ: ${item.userAnswer} (é”™è¯¯)</p>
                        <p>æ­£ç¡®ç­”æ¡ˆ: ${item.correctAnswer}</p>
                    `;
                    wrongAnswersList.appendChild(div);
                });
                
                document.getElementById('wrong-answers').style.display = 'block';
            }
        }

        // ç”Ÿæˆéšæœºé¢˜ç›®
        function generateQuiz() {
            const questionsContainer = document.getElementById('questions');
            questionsContainer.innerHTML = '';
            
            // éšæœºé€‰æ‹©10ä¸ªä¸é‡å¤çš„äº‹ä»¶
            const selectedEvents = [];
            const usedIndices = new Set();
            
            while (selectedEvents.length < 10 && selectedEvents.length < silkRoadEvents.length) {
                const randomIndex = Math.floor(Math.random() * silkRoadEvents.length);
                if (!usedIndices.has(randomIndex)) {
                    usedIndices.add(randomIndex);
                    selectedEvents.push(silkRoadEvents[randomIndex]);
                }
            }
            
            // ç”Ÿæˆé¢˜ç›®
            selectedEvents.forEach((event, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <p>${index + 1}. ${event.event} å‘ç”Ÿäºå…¬å…ƒ <input type="text" id="answer-${index}" data-correct="${event.year}"> å¹´</p>
                    <div id="feedback-${index}" class="feedback"></div>
                `;
                questionsContainer.appendChild(questionDiv);
            });
            
            // é‡ç½®ç»“æœæ˜¾ç¤º
            document.getElementById('result').style.display = 'none';
            document.getElementById('submit-btn').style.display = 'block';
            document.getElementById('new-quiz-btn').style.display = 'none';
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswers() {
            const questionDivs = document.querySelectorAll('.question');
            let correctCount = 0;
            const wrongAnswers = [];
            
            questionDivs.forEach((div, index) => {
                const input = document.getElementById(`answer-${index}`);
                const feedback = document.getElementById(`feedback-${index}`);
                const correctAnswer = input.dataset.correct;
                const userAnswer = input.value.trim();
                
                // å¤„ç†"çº¦"å’Œ"å‰"çš„ç‰¹æ®Šæƒ…å†µ
                const simplifiedCorrect = correctAnswer.replace(/çº¦|å‰/g, '');
                const simplifiedUser = userAnswer.replace(/çº¦|å‰/g, '');
                
                // å¤„ç†ä¸–çºªè¡¨ç¤ºæ³•ï¼ˆå¦‚"5ä¸–çºª"ï¼‰
                const isCentury = correctAnswer.includes('ä¸–çºª');
                let isCorrect = false;
                
                if (isCentury) {
                    // å¦‚æœæ˜¯ä¸–çºªè¡¨ç¤ºæ³•ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†æ­£ç¡®çš„ä¸–çºª
                    const correctCentury = correctAnswer.match(/\d+/)[0];
                    const userCentury = userAnswer.match(/\d+/)?.[0];
                    isCorrect = userCentury === correctCentury;
                } else {
                    isCorrect = simplifiedUser === simplifiedCorrect || userAnswer === correctAnswer;
                }
                
                if (isCorrect) {
                    feedback.innerHTML = '<span style="color:green;">âœ“ æ­£ç¡®</span>';
                    correctCount++;
                } else {
                    feedback.innerHTML = `<span style="color:red;">âœ— é”™è¯¯ (æ­£ç¡®ç­”æ¡ˆ: ${correctAnswer})</span>`;
                    wrongAnswers.push({
                        event: div.textContent.split('å‘ç”Ÿäº')[0].replace(/^\d+\.\s/, ''),
                        userAnswer: userAnswer || 'æœªå›ç­”',
                        correctAnswer: correctAnswer
                    });
                }
            });
            
            // æ›´æ–°ç»Ÿè®¡
            stats.totalAnswered += questionDivs.length;
            stats.correctCount += correctCount;
            stats.wrongCount += (questionDivs.length - correctCount);
            
            // æ·»åŠ åˆ°é”™é¢˜é›†
            wrongAnswers.forEach(wrong => {
                // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨äºé”™é¢˜é›†ä¸­
                const exists = stats.wrongAnswers.some(item => 
                    item.event === wrong.event && item.correctAnswer === wrong.correctAnswer
                );
                
                if (!exists) {
                    stats.wrongAnswers.push(wrong);
                }
            });
            
            // ä¿å­˜å¹¶æ›´æ–°æ˜¾ç¤º
            saveStats();
            updateStatsDisplay();
            
            // æ˜¾ç¤ºç»“æœ
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.className = correctCount === questionDivs.length ? 'result correct' : 'result incorrect';
            resultDiv.innerHTML = `
                <h3>æµ‹è¯•ç»“æœ</h3>
                <p>æ­£ç¡®: ${correctCount} / ${questionDivs.length}</p>
                <p>å¾—åˆ†: ${Math.round((correctCount / questionDivs.length) * 100)}åˆ†</p>
                ${correctCount === questionDivs.length ? 
                    '<p>ğŸ‰ å¤ªæ£’äº†ï¼ä½ å¯¹ä¸ç»¸ä¹‹è·¯å†å²éå¸¸äº†è§£ï¼</p>' : 
                    correctCount >= questionDivs.length * 0.7 ? 
                    '<p>ğŸ‘ ä¸é”™ï¼ç»§ç»­åŠªåŠ›æŒæ¡æ›´å¤šä¸ç»¸ä¹‹è·¯çŸ¥è¯†ï¼</p>' : 
                    '<p>ğŸ’ª åŠ æ²¹ï¼å»ºè®®å¤šå¤ä¹ ä¸ç»¸ä¹‹è·¯çš„é‡è¦å†å²äº‹ä»¶ï¼</p>'}
            `;
            
            document.getElementById('submit-btn').style.display = 'none';
            document.getElementById('new-quiz-btn').style.display = 'block';
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadStats();
            generateQuiz();
            
            document.getElementById('submit-btn').addEventListener('click', checkAnswers);
            document.getElementById('new-quiz-btn').addEventListener('click', generateQuiz);
        });
    </script>
</body>
</html>